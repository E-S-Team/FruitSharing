{"remainingRequest":"/Users/zhangzhou/MyProgram/demo/node_modules/babel-loader/lib/index.js!/Users/zhangzhou/MyProgram/demo/src/common/helper.js","dependencies":[{"path":"/Users/zhangzhou/MyProgram/demo/src/common/helper.js","mtime":1580970622000},{"path":"/Users/zhangzhou/MyProgram/demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhangzhou/MyProgram/demo/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CgovKioKICogQ29udmVydCBzb21lIGFtb3VudCBvZiBtb25leSBmcm9tIG9uZSBjdXJyZW5jeSB0byBhbm90aGVyLCBnaXZlbiB0aGVpciBleGNoYW5nZSByYXRlIHcuci50IFVTRAogCiAqIEBwYXJhbSBmcm9tUmF0ZTogVGhlIGV4Y2hhbmdlIHJhdGUgb2YgdGhlIG9yaWdpbmFsIGN1cnJlbmN5CiAqIEBwYXJhbSB0b1JhdGU6IHRoZSBleGNoYW5nZSByYXRlIG9mIHRoZSBjdXJyZW5jeSB3ZSBhcmUgY29udmVydGluZyB0bwogKiBAcGFyYW0gYW1vdW50OiB0aGUgYW1vdW50IG9mIHRoZSBvcmlnaW5hbCBjdXJyZW5jeQogKi8KZnVuY3Rpb24gY29udmVydEJ5UmF0ZShfcmVmKSB7CiAgdmFyIGZyb21SYXRlID0gX3JlZi5mcm9tUmF0ZSwKICAgICAgdG9SYXRlID0gX3JlZi50b1JhdGUsCiAgICAgIGFtb3VudCA9IF9yZWYuYW1vdW50OwogIC8vIGFsd2F5cyBjb252ZXJ0IG9uZSBjdXJyZW5jeSB0byBVU0QgdGhlbiB0byBvdGhlcgogIHZhciByYXRlRnJvbTJVU0QgPSAxIC8gZnJvbVJhdGU7CiAgdmFyIHJhdGVVU0QyVG8gPSB0b1JhdGU7CiAgcmV0dXJuIGFtb3VudCAqIHJhdGVGcm9tMlVTRCAqIHJhdGVVU0QyVG87Cn0KLyoqCiAqIFVwZGF0ZSBhbGwgdGhlIGV4Y2hhbmdlIHJhdGVzIGJ5IEFQSSBjYWxsCiAqIAogKiBAcGFyYW0gY2FsbGJhY2s6IGEgY2FsbGJhY2sgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGV4ZWN1dGVkIHdoZW4gQVBJIHJlcXVlc3Qgc3VjY2VlZAogKi8KCgpmdW5jdGlvbiB1cGRhdGVSYXRlRnJvbUFQSShjYWxsYmFjaykgewogIHZhciBVUkxfQVBJID0gImh0dHBzOi8vYmY0NDliODAtNGRhMy00ZTE5LTlmMGItMzg3NjQ2MjIxODY4Lm1vY2sucHN0bW4uaW8vaGhqIjsKICBmZXRjaChVUkxfQVBJKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgcmV0dXJuIHJlc3BvbnNlLnRleHQoKTsKICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICBkYXRhID0gSlNPTi5wYXJzZShkYXRhKTsKICAgIGRhdGEgPSBkYXRhWyJxdW90ZXMiXTsKICAgIGNvbnNvbGUubG9nKCJ0aGlzIGlzIERBVEE6Iik7CiAgICBjb25zb2xlLmxvZyhkYXRhKTsKICAgIHZhciB0YWJsZSA9IHt9OwogICAgdGFibGVbIlVTRCJdID0gMTsKCiAgICBmb3IgKHZhciBlYWNoIGluIGRhdGEpIHsKICAgICAgaWYgKCFkYXRhLmhhc093blByb3BlcnR5KGVhY2gpKSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KCiAgICAgIHZhciBhYmJyID0gZWFjaC5zdWJzdHJpbmcoMyk7CiAgICAgIHRhYmxlW2FiYnJdID0gZGF0YVtlYWNoXTsKICAgIH0KCiAgICBjb25zb2xlLmxvZygidGhpcyBpcyB0YWJsZSIpOwogICAgY29uc29sZS5sb2codGFibGUpOwogICAgY2FsbGJhY2sodGFibGUpOwogIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgY29uc29sZS5sb2coIj4+PiBVcGRhdGluZyByYXRlIGZhaWxlZCBcbiIgKyBlcnJvcik7CiAgICBhbGVydCgiUGxlYXNlIGVuYWJsZSBzZW5kaW5nIEhUVFAgcmVxdWVzdCBpbiB0aGUgYnJvd3NlcidzIHBhZ2Ugc3BlY2lmaWMgc2V0dGluZ1xuVGhpcyBhcHAgd2lsbCBtYWtlIGEgSFRUUCByZXF1ZXN0IHRvIHVwZGF0ZSBleGNoYW5nZSByYXRlLiIpOwogIH0pOwp9CgpleHBvcnQgeyBjb252ZXJ0QnlSYXRlLCB1cGRhdGVSYXRlRnJvbUFQSSB9Ow=="},{"version":3,"sources":["/Users/zhangzhou/MyProgram/demo/src/common/helper.js"],"names":["convertByRate","fromRate","toRate","amount","rateFrom2USD","rateUSD2To","updateRateFromAPI","callback","URL_API","fetch","then","response","text","data","JSON","parse","console","log","table","each","hasOwnProperty","abbr","substring","catch","error","alert"],"mappings":";;AAAA;;;;;;;AAOA,SAASA,aAAT,OAAmD;AAAA,MAA3BC,QAA2B,QAA3BA,QAA2B;AAAA,MAAjBC,MAAiB,QAAjBA,MAAiB;AAAA,MAATC,MAAS,QAATA,MAAS;AAC/C;AACA,MAAMC,YAAY,GAAG,IAAIH,QAAzB;AACA,MAAMI,UAAU,GAAGH,MAAnB;AAEA,SAAOC,MAAM,GAAGC,YAAT,GAAwBC,UAA/B;AACH;AAED;;;;;;;AAKA,SAASC,iBAAT,CAA2BC,QAA3B,EAAqC;AACjC,MAAMC,OAAO,GAAG,gEAAhB;AACAC,EAAAA,KAAK,CAACD,OAAD,CAAL,CAAeE,IAAf,CAAoB,UAACC,QAAD,EAAc;AAC9B,WAAOA,QAAQ,CAACC,IAAT,EAAP;AACH,GAFD,EAEGF,IAFH,CAEQ,UAACG,IAAD,EAAU;AACdA,IAAAA,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWF,IAAX,CAAP;AACAA,IAAAA,IAAI,GAAGA,IAAI,CAAC,QAAD,CAAX;AACAG,IAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAYJ,IAAZ;AACA,QAAMK,KAAK,GAAG,EAAd;AACAA,IAAAA,KAAK,CAAC,KAAD,CAAL,GAAe,CAAf;;AAEA,SAAK,IAAIC,IAAT,IAAiBN,IAAjB,EAAuB;AACnB,UAAI,CAACA,IAAI,CAACO,cAAL,CAAoBD,IAApB,CAAL,EAAgC;AAC5B;AACH;;AAED,UAAME,IAAI,GAAGF,IAAI,CAACG,SAAL,CAAe,CAAf,CAAb;AACAJ,MAAAA,KAAK,CAACG,IAAD,CAAL,GAAcR,IAAI,CAACM,IAAD,CAAlB;AACH;;AACDH,IAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAYC,KAAZ;AACAX,IAAAA,QAAQ,CAACW,KAAD,CAAR;AACH,GArBD,EAqBGK,KArBH,CAqBS,UAACC,KAAD,EAAW;AAChBR,IAAAA,OAAO,CAACC,GAAR,CAAY,gCAAgCO,KAA5C;AACAC,IAAAA,KAAK,CAAC,uIAAD,CAAL;AACH,GAxBD;AAyBH;;AAED,SACIzB,aADJ,EAEIM,iBAFJ","sourcesContent":["/**\n * Convert some amount of money from one currency to another, given their exchange rate w.r.t USD\n \n * @param fromRate: The exchange rate of the original currency\n * @param toRate: the exchange rate of the currency we are converting to\n * @param amount: the amount of the original currency\n */\nfunction convertByRate({fromRate, toRate, amount}) {\n    // always convert one currency to USD then to other\n    const rateFrom2USD = 1 / fromRate;\n    const rateUSD2To = toRate;\n\n    return amount * rateFrom2USD * rateUSD2To;\n}\n\n/**\n * Update all the exchange rates by API call\n * \n * @param callback: a callback function that will be executed when API request succeed\n */\nfunction updateRateFromAPI(callback) {\n    const URL_API = \"https://bf449b80-4da3-4e19-9f0b-387646221868.mock.pstmn.io/hhj\";\n    fetch(URL_API).then((response) => {\n        return response.text();\n    }).then((data) => {\n        data = JSON.parse(data);\n        data = data[\"quotes\"];\n        console.log(\"this is DATA:\");\n        console.log(data);\n        const table = {};\n        table[\"USD\"] = 1;\n\n        for (let each in data) {\n            if (!data.hasOwnProperty(each)) {\n                continue;\n            }\n\n            const abbr = each.substring(3);\n            table[abbr] = data[each];\n        }\n        console.log(\"this is table\");\n        console.log(table);\n        callback(table);\n    }).catch((error) => {\n        console.log(\">>> Updating rate failed \\n\" + error);\n        alert(\"Please enable sending HTTP request in the browser's page specific setting\\nThis app will make a HTTP request to update exchange rate.\");\n    });\n}\n\nexport {\n    convertByRate,\n    updateRateFromAPI\n};"]}]}